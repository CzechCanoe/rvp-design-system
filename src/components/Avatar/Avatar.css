/* ==========================================================================
   Avatar Component Styles
   ========================================================================== */

.csk-avatar {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  overflow: hidden;
  background-color: var(--color-bg-subtle);
  color: var(--color-text-secondary);
  font-family: var(--font-family-sans);
  font-weight: var(--font-weight-medium);
  user-select: none;
  vertical-align: middle;
}

/* ==========================================================================
   Sizes
   ========================================================================== */

.csk-avatar--xs {
  width: 24px;
  height: 24px;
  font-size: var(--font-size-xs);
}

.csk-avatar--sm {
  width: 32px;
  height: 32px;
  font-size: var(--font-size-sm);
}

.csk-avatar--md {
  width: 40px;
  height: 40px;
  font-size: var(--font-size-base);
}

.csk-avatar--lg {
  width: 48px;
  height: 48px;
  font-size: var(--font-size-lg);
}

.csk-avatar--xl {
  width: 64px;
  height: 64px;
  font-size: var(--font-size-xl);
}

.csk-avatar--2xl {
  width: 96px;
  height: 96px;
  font-size: var(--font-size-2xl);
}

/* ==========================================================================
   Shape Variants
   ========================================================================== */

.csk-avatar--circular {
  border-radius: var(--radius-full);
}

.csk-avatar--rounded {
  border-radius: var(--radius-lg);
}

.csk-avatar--square {
  border-radius: var(--radius-sm);
}

/* ==========================================================================
   Color Variants (for initials/fallback)
   ========================================================================== */

.csk-avatar--default {
  background-color: var(--color-neutral-200);
  color: var(--color-neutral-600);
}

.csk-avatar--primary {
  background-color: var(--color-primary-100);
  color: var(--color-primary-700);
}

.csk-avatar--success {
  background-color: var(--color-success-100);
  color: var(--color-success-700);
}

.csk-avatar--warning {
  background-color: var(--color-warning-100);
  color: var(--color-warning-700);
}

.csk-avatar--error {
  background-color: var(--color-error-100);
  color: var(--color-error-700);
}

.csk-avatar--info {
  background-color: var(--color-info-100);
  color: var(--color-info-700);
}

/* CSK Section Colors */
.csk-avatar--dv {
  background-color: var(--color-section-dv-bg);
  color: var(--color-section-dv);
}

.csk-avatar--ry {
  background-color: var(--color-section-ry-bg);
  color: var(--color-section-ry);
}

.csk-avatar--vt {
  background-color: var(--color-section-vt-bg);
  color: var(--color-section-vt);
}

/* Overflow indicator */
.csk-avatar--overflow {
  background-color: var(--color-neutral-100);
  color: var(--color-neutral-700);
  border: 2px solid var(--color-bg-primary);
}

/* ==========================================================================
   Image
   ========================================================================== */

.csk-avatar__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ==========================================================================
   Initials
   ========================================================================== */

.csk-avatar__initials {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  line-height: 1;
  text-transform: uppercase;
  letter-spacing: var(--letter-spacing-tight);
}

/* ==========================================================================
   Icon
   ========================================================================== */

.csk-avatar__icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

.csk-avatar__icon svg {
  width: 60%;
  height: 60%;
}

/* ==========================================================================
   Status Indicator
   ========================================================================== */

.csk-avatar__status {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 25%;
  height: 25%;
  min-width: 8px;
  min-height: 8px;
  border-radius: var(--radius-full);
  border: 2px solid var(--color-bg-primary);
  box-sizing: content-box;
}

.csk-avatar__status--online {
  background-color: var(--color-success-500);
}

.csk-avatar__status--offline {
  background-color: var(--color-neutral-400);
}

.csk-avatar__status--busy {
  background-color: var(--color-error-500);
}

.csk-avatar__status--away {
  background-color: var(--color-warning-500);
}

/* Adjust status position for different shapes */
.csk-avatar--rounded .csk-avatar__status,
.csk-avatar--square .csk-avatar__status {
  bottom: -2px;
  right: -2px;
}

/* ==========================================================================
   Avatar Group
   ========================================================================== */

.csk-avatar-group {
  display: inline-flex;
  flex-direction: row-reverse;
  justify-content: flex-end;
}

.csk-avatar-group > .csk-avatar {
  border: 2px solid var(--color-bg-primary);
  box-sizing: content-box;
}

/* Spacing variants */
.csk-avatar-group--spacing-tight > .csk-avatar:not(:last-child) {
  margin-left: -12px;
}

.csk-avatar-group--spacing-normal > .csk-avatar:not(:last-child) {
  margin-left: -8px;
}

.csk-avatar-group--spacing-loose > .csk-avatar:not(:last-child) {
  margin-left: -4px;
}

/* Size-specific spacing adjustments */
.csk-avatar-group--xs.csk-avatar-group--spacing-tight > .csk-avatar:not(:last-child) {
  margin-left: -8px;
}

.csk-avatar-group--xs.csk-avatar-group--spacing-normal > .csk-avatar:not(:last-child) {
  margin-left: -6px;
}

.csk-avatar-group--sm.csk-avatar-group--spacing-tight > .csk-avatar:not(:last-child) {
  margin-left: -10px;
}

.csk-avatar-group--sm.csk-avatar-group--spacing-normal > .csk-avatar:not(:last-child) {
  margin-left: -8px;
}

.csk-avatar-group--lg.csk-avatar-group--spacing-tight > .csk-avatar:not(:last-child) {
  margin-left: -14px;
}

.csk-avatar-group--lg.csk-avatar-group--spacing-normal > .csk-avatar:not(:last-child) {
  margin-left: -10px;
}

.csk-avatar-group--xl.csk-avatar-group--spacing-tight > .csk-avatar:not(:last-child) {
  margin-left: -18px;
}

.csk-avatar-group--xl.csk-avatar-group--spacing-normal > .csk-avatar:not(:last-child) {
  margin-left: -12px;
}

.csk-avatar-group--2xl.csk-avatar-group--spacing-tight > .csk-avatar:not(:last-child) {
  margin-left: -24px;
}

.csk-avatar-group--2xl.csk-avatar-group--spacing-normal > .csk-avatar:not(:last-child) {
  margin-left: -16px;
}

/* Hover effect for group - bring avatar to front */
.csk-avatar-group > .csk-avatar {
  transition: transform var(--transition-fast);
}

.csk-avatar-group > .csk-avatar:hover {
  transform: translateY(-2px);
  z-index: 1;
}

/* ==========================================================================
   Dark Mode
   ========================================================================== */

[data-theme='dark'] .csk-avatar--default {
  background-color: var(--color-neutral-700);
  color: var(--color-neutral-200);
}

[data-theme='dark'] .csk-avatar--primary {
  background-color: var(--color-primary-900);
  color: var(--color-primary-200);
}

[data-theme='dark'] .csk-avatar--success {
  background-color: var(--color-success-900);
  color: var(--color-success-200);
}

[data-theme='dark'] .csk-avatar--warning {
  background-color: var(--color-warning-900);
  color: var(--color-warning-200);
}

[data-theme='dark'] .csk-avatar--error {
  background-color: var(--color-error-900);
  color: var(--color-error-200);
}

[data-theme='dark'] .csk-avatar--info {
  background-color: var(--color-info-900);
  color: var(--color-info-200);
}

[data-theme='dark'] .csk-avatar--overflow {
  background-color: var(--color-neutral-800);
  color: var(--color-neutral-200);
  border-color: var(--color-bg-primary);
}

[data-theme='dark'] .csk-avatar-group > .csk-avatar {
  border-color: var(--color-bg-primary);
}

[data-theme='dark'] .csk-avatar__status {
  border-color: var(--color-bg-primary);
}

/* System preference dark mode */
@media

  :root:not([data-theme='light']) .csk-avatar--success {
    background-color: var(--color-success-900);
    color: var(--color-success-200);
  }

  :root:not([data-theme='light']) .csk-avatar--warning {
    background-color: var(--color-warning-900);
    color: var(--color-warning-200);
  }

  :root:not([data-theme='light']) .csk-avatar--error {
    background-color: var(--color-error-900);
    color: var(--color-error-200);
  }

  :root:not([data-theme='light']) .csk-avatar--info {
    background-color: var(--color-info-900);
    color: var(--color-info-200);
  }

  :root:not([data-theme='light']) .csk-avatar--overflow {
    background-color: var(--color-neutral-800);
    color: var(--color-neutral-200);
    border-color: var(--color-bg-primary);
  }

  :root:not([data-theme='light']) .csk-avatar-group > .csk-avatar {
    border-color: var(--color-bg-primary);
  }

  :root:not([data-theme='light']) .csk-avatar__status {
    border-color: var(--color-bg-primary);
  }
}

/* ==========================================================================
   Reduced Motion
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  .csk-avatar-group > .csk-avatar {
    transition: none;
  }

  .csk-avatar-group > .csk-avatar:hover {
    transform: none;
  }
}
